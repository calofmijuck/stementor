\subsection*{Comparison with the Riemann Integral}

For Lebesgue measure \(m\), we write
\[
    \int_{[a, b]} f \d{m} = \int_{[a, b]} f \d{x} = \int_a^b f \d{x},
\]
and denote the Riemann integral as \(\ds \mc{R}\int_a^b f\d{x}\).

\thm{11.33} Let \(a, b \in \R\), \(a < b\), \(f\) be bounded.
\begin{enumerate}
    \item If \(f \in \mc{R}[a, b]\), then \(f \in \mc{L}^{1}[a, b]\) and \(\ds \int_a^b f\d{x} = \mc{R}\int_a^b f \d{x}\).
    \item \(f \in \mc{R}[a, b]\) \(\iff\) \(f\) is continuous \ae on \([a, b]\).\footnote{\(\mc{L}^{1}\)의 equivalence를 고려하면 사실상 연속함수에 대해서만 리만적분할 수 있다는 뜻입니다.}
\end{enumerate}

\pf Choose partitions \(P_k = \{a = x_0^k < x_1^k < \cdots < x_{n_k}^k = b\}\) on \([a, b]\) such that \(P_k \subset P_{k+1}\) (refinement) and \(\abs{x_{i}^k - x_{i-1}^k} < \frac{1}{k}\). Then
\[
    \lim_{k \ra \infty} L(P_k, f) = \mc{R}\lint{}{} f\d{x}, \quad \lim_{k \ra \infty} U(P_k, f) = \mc{R} \uint{}{} f \d{x}.
\]
Define a sequence of measurable simple functions \(U_k, L_k\).
\[
    U_k = \sum_{i=1}^{n_k} \sup_{x_{i-1}^k \leq y \leq x_{i}^k} f(y) \chi_{(x_{i-1}^k, x_i^k]}, \quad L_k = \sum_{i=1}^{n_k} \inf_{x_{i-1}^k \leq y \leq x_{i}^k} f(y) \chi_{(x_{i-1}^k, x_i^k]}.
\]
We have \(L_k \leq f \leq U_k\),
\[
    \int_a^b L_k \d{x} = L(P_k, f), \quad \int_a^b U_k \d{x} = U(P_k, f),
\]
with \(L_k\) increasing, \(U_k\) decreasing. (By refinement) Let
\[
    L(x) = \lim_{k \ra \infty} L_k(x), \quad U(x) = \lim_{k \ra \infty} U_k(x).
\]
The limits exist, and since \(f, L_k, U_k\) are bounded,
\[
    \int_a^b L \d{x} = \lim_{k \ra \infty} \int_a^b L_k \d{x} = \mc{R}\lint{}{} f\d{x} < \infty, \int_a^b U\d{x} = \mc{R} \uint{}{} f \d{x} < \infty
\]
by LDCT. Thus \(L, U \in \mc{L}^{1}[a, b]\), and
\begin{center}
    \(f \in \mc{R}[a, b]\) \(\iff\) \(\ds \int_a^b (U - L)\d{x} = 0\) \(\iff\) \(U = L\) \ae on \([a, b]\).
\end{center}

\note{1} If \(f \in \mc{R}[a, b]\), we have \(f = U = L\) \ae on \(E\). Thus \(f\) is measurable, and
\[
    \int_a^b f \d{x} = \mc{R}\int_a^b f\d{x} < \infty \implies f \in \mc{L}^{1}([a, b]).
\]

\note{2} Suppose \(x \notin \bigcup_{k=1}^{\infty} P_k\), then for every \(\epsilon > 0\),
\begin{center}
    \(\exists n, j_0\) such that \(x \in (t_{j_0-1}^n, t_{j_0}^n)\) and \(\abs{L_n(x) - L(x)} + \abs{U_n(x) - U(x)} < \epsilon\).
\end{center}
Then for all \(y \in (t_{j_0-1}^n, t_{j_0}^n)\),
\[
    \abs{f(x) - f(y)} \leq M_{j_0}^n - m_{j_0}^n = M_{j_0}^n - U(x) + U(x) - L(x) + L(x) - m_{j_0}^n \leq U(x) - L(x) + \epsilon.
\]
Therefore \(\{x : U(x) = L(x)\} \bs \bigcup_{k=1}^{\infty} P_k \subset \{x : f(x) \text{ is continuous}\} \subset \{x : U(x) = L(x)\}\).

Since \(\bigcup_{k=1}^{\infty} P_k\) has measure zero, \(U = L\) \ae \(\iff f\) is continuous \ae Therefore,
\begin{center}
    \(f \in \mc{R}[a, b] \iff U = L\) \ae \(\iff f\) is continuous \ae
\end{center}

\rmk
\begin{enumerate}
    \item If \(x \notin P_k\) for all \(k\), \(f\) is continuous at \(x \iff f(x) = U(x) = L(x)\).
    \item \(L(x) \leq f(x) \leq U(x)\) and \(L(x), U(x)\) are measurable.\footnote{Limit of measurable functions.}
    \item Since \(\abs{f} \leq M\), we can assume that \(f \geq 0\), because we can consider \(f + M\).
\end{enumerate}

\pagebreak
